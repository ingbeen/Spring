package com.spring.memberboard.board;

// 코딩순서 : VO -> DAO -> Service -> ServiceImpl -> Controller

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class BoardController {

	@Autowired
	private BoardService boardService;

	@RequestMapping("boardlist.bo")
	public String getBoardList(HttpServletRequest request, Model model) {
		boardService.getBoardList(request, model);
		
		return "board/board_list";
	}
	
	@RequestMapping("boardwriteform.bo")
	public String getBoardList() {

		return "board/board_write";
	}

	@RequestMapping("boardwrite.bo")
	public String BoardWrite(BoardVO boardVO) throws Exception {
		int newNum = boardService.BoardWrite(boardVO);
		
		return "redirect:/boarddetail.bo?num=" + newNum;
	}

	@RequestMapping("boarddetail.bo")
	public String getDetail(BoardVO boardVO, Model model) {
		boardService.getDetail(boardVO, model);

		return "board/board_view";
	}
	
	@RequestMapping("filedownload.bo")
	public void fileDownload(HttpServletRequest request, HttpServletResponse response) throws Exception {
		boardService.fileDownload(request, response);
	}
	
	@RequestMapping("boardreplyform.bo")
	public String boardReplyForm(BoardVO boardVO, Model model) {
		BoardVO boardVO = boardService.getDetail(boardVO, model);
		model.addAttribute("boardVO", boardVO);

		return "board/board_reply";
	}
	
//	@RequestMapping("boardreply.bo")
//	public String boardReply(BoardVO boardVO) {
//		int newNum = boardService.boardReply(boardVO);
//
//		return "redirect:/boarddetail.bo?num=" + newNum;
//	}
//	
//	@RequestMapping("boardmodifyform.bo")
//	public String boardModifyForm(HttpServletRequest request, Model model) {
//		BoardVO boardVO = boardService.boardModifyForm(request);
//		if (boardVO == null) {
//			boardVO = boardService.getDetail(request);
//			model.addAttribute("boardVO", boardVO);
//			System.out.println("작성자가 아닙니다");
//			
//			return "board/board_view";
//		}
//		
//		model.addAttribute("boardVO", boardVO);
//		return "board/board_modify";
//	}
//	
//	@RequestMapping("boardmodify.bo")
//	public String boardModify(BoardVO boardVO) {
//		boardService.boardModify(boardVO);
//
//		return "redirect:/boarddetail.bo?num=" + boardVO.getNum();
//	}
//	
//	
//	@RequestMapping("boarddelete.bo")
//	public String boardDelete(HttpServletRequest request) {
//		boardService.boardDelete(request);
//
//		return "redirect:/boardlist.bo";
//	}

}